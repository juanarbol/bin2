steps:
  - checkout
  - run:
      name: npm update
      command: 'sudo npm install -g npm@latest'
  - restore_cache:
      key: dependency-cache-{{ checksum "package.json" }}
  - run:
      name: Install dependencies
      command: npm install
  - save_cache:
      key: dependency-cache-{{ checksum "package.json" }}
      paths:
        - ./node_modules
  - run:
      name: Run tests
      command: npm test
  - run:
      name: Run linter
      command: npm run lint
